{"version":3,"file":"src_app_pages_home_home_module_ts.js","mappings":"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","sources":["./src/app/pages/home/home.module.ts","./src/app/pages/home/home.page.ts","./src/app/services/login/login.service.ts"],"sourcesContent":["import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Routes } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { UserRouteAccessService } from 'src/app/services/auth/user-route-access.service';\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage,\n    data: {\n      authorities: ['ROLE_USER'],\n    },\n    canActivate: [UserRouteAccessService],\n  },\n];\n\n@NgModule({\n  imports: [IonicModule, CommonModule, FormsModule, TranslateModule, RouterModule.forChild(routes)],\n  declarations: [HomePage],\n})\nexport class HomePageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { NavController } from '@ionic/angular';\nimport { Account } from 'src/model/account.model';\nimport { AccountService } from '../../services/auth/account.service';\nimport { LoginService } from '../../services/login/login.service';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\nexport class HomePage implements OnInit {\n  account: Account;\n\n  constructor(public navController: NavController, private accountService: AccountService, private loginService: LoginService) {}\n\n  ngOnInit() {\n    this.accountService.identity().then(account => {\n      if (account === null) {\n        this.goBackToHomePage();\n      } else {\n        this.account = account;\n      }\n    });\n  }\n\n  isAuthenticated() {\n    return this.accountService.isAuthenticated();\n  }\n\n  async logout() {\n    await this.loginService.logout();\n    this.goBackToHomePage();\n  }\n\n  private goBackToHomePage(): void {\n    this.navController.navigateRoot('');\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { AccountService } from '../auth/account.service';\nimport { AuthService } from 'ionic-appauth';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LoginService {\n  constructor(private accountService: AccountService, private authService: AuthService, private translate: TranslateService) {}\n\n  login() {\n    this.authService\n      .signIn()\n      .then(data => {\n        this.accountService.identity(true).then(account => {\n          // After the login the language will be changed to\n          // the language selected by the user during his registration\n          if (account !== null) {\n            this.translate.use(account.langKey);\n          }\n        });\n      })\n      .catch(error => {\n        console.error(`Sign in error: ${error}`);\n      });\n  }\n\n  async logout() {\n    await this.authService.signOut();\n    this.accountService.authenticate(null);\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}